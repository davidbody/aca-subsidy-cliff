---
title: "ACA Subsidies Cliff"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, echo=FALSE, message=FALSE, warning=FALSE, error=FALSE, cache=TRUE}
source("aca-subsidies.R")
```

*This draft is a work in progress and will be updated from time to time.*

### Main features of the ACA

The [Affordable Care Act (ACA)](https://en.wikipedia.org/wiki/Patient_Protection_and_Affordable_Care_Act) was enacted in 2010 and major provisions went into effect in 2014. The goal, to expand health insurance coverage in the United States, was accomplished in two primary ways.

First, Medicaid eligibility was expanded to all U.S. citizens and legal residents with incomes up to 133% of the federal poverty level. [As of October 2017](https://www.kff.org/uninsured/issue-brief/the-coverage-gap-uninsured-poor-adults-in-states-that-do-not-expand-medicaid/), 32 states (including DC) had expanded Medicaid and 19 had not.

Second, significant changes were made to individual health insurance markets.

* Insurers were required to use community rating, meaning they could no longer deny coverage or charge higher premiums based on pre-existing conditions or sex.
* To avoid adverse selection, almost everyone is required to have health insurance that provides certain essential health benefits. Those who do not have employer-provided insurance or Medicaid are required to buy health insurance or pay a penalty. (This "individual mandate" has been repealed starting in 2019.)
* Finally, subsidies are provided to help people afford such coverage.

This paper is about a particular feature of those subsidies that may create a substantial disincentive to work for certain individuals.

### Two kinds of subsidies

It should be noted that there are two kinds of subsidies under the ACA.

#### Premium tax credits

The larger of the two kinds of subsidies is used to help people pay premiums of policies purchased on health insurance exchanges set up under the ACA. These subsidies are provided in the form of "[premium tax credits](https://www.irs.gov/affordable-care-act/individuals-and-families/the-premium-tax-credit-the-basics-0)" and are available to ACA enrollees earning up to 400% of the federal poverty level (FPL). Premium tax credits are calculated based on an enrollee's expected income and can be paid in advance directly to insurance companies. When the enrollee files her income tax return the following year, premium tax credit is reconciled based on actual income and income tax liability or refund is adjusted accordingly.

#### Cost sharing reductions

[Cost sharing reductions (CSR)](https://en.wikipedia.org/wiki/Cost_sharing_reductions_subsidy) subsidies are provided to reduce the copayments and deductibles for ACA enrollees with incomes under 250% of the FPL. Until 2018, these subsidies were paid to insurance companies to compensate for the costs of reducing copayments and deductibles for eligible ACA enrollees. [Starting in 2018](https://www.nytimes.com/2017/10/12/us/politics/trump-obamacare-executive-order-health-insurance.html), insurance companies will no longer receive the CSR subsidies, but will still be required to reduce copayments and deductibles. Insurance companies therefore increased premiums for everyone in order to compensate for the loss of the CSR subsidies.

As we'll see below, these premium increases and the resulting increase in premium tax credits creates perverse effects for certain individuals.

### How is the premium tax credit calculated?

The larger of the two subsidies is the premium tax credit which is available to people whose income is up to 400% of the FPL. This subsidy is designed to make health insurance cost no more than a certain percentage of a household's income. The subsidy is calculated as follows:

* First determine a **reference premium** which is the second lowest Silver premium available to the insured.
* Second determine the **applicable percentage** from the table below.
* Third calculate a **maximum available subsidy** as the excess of the reference premium over that percentage of the insured's income.
* Finally, the **actual subsidy** is the lesser of the premium on the policy selected by the insured and the maximum available subsidy.

For 2018, the applicable percentage is determined from the following table, based on household income:

```{r, echo=FALSE, message=FALSE}
library(dplyr)
library(glue)
library(knitr)
label_text <- Vectorize(function(lower_percent, upper_percent) {
  if (lower_percent == 0) {
    return(glue("Less than {100 * upper_percent}%"))
  } else {
    return(glue('At least {100 * lower_percent}% but less than {100 * upper_percent}%'))
  }
})

subsidy_table %>%
  filter(year == 2018) %>%
  mutate(`Household income percentage of FPL` = label_text(lower_percent, upper_percent),
         `Initial percentage` = glue('{format(lower_cap, nsmall=2)}%'),
         `Final percentage` = glue('{format(upper_cap, nsmall=2)}%')) %>%
  select(-year, -lower_percent, -upper_percent, -lower_cap, -upper_cap) %>%
  kable
```

Subsidies are available to people who purchase health insurance on an exchange and whose household income is between 100% and 400% of the FPL. For people in states that have expanded Medicaid under the ACA, subsidies are available for incomes between 138% and 400% of FPL (because almost everyone with incomes below 138% of FPL qualify for Medicaid and therefore are not eligible to buy insurance on an exchange).

The subsidy percentages look like this:

```{r, echo=FALSE, message=FALSE, fig.height=3, fig.width=10}
library(ggplot2)
library(gridExtra)
grid.arrange(apr_chart("IA") + labs(title = "Medicaid Exapnsion State") + theme(aspect.ratio = 1/3),
             apr_chart("TX") + labs(title = "Non-Medicaid Expansion State") + theme(aspect.ratio = 1/3),
             nrow = 1)
```

The maximum available subsidy will be the excess of the reference premium over the applicable percentage of a household's income.

Note that subsidies are not available to households with incomes below 100% (138% for Medicaid expansion states) or above 400% of the FPL.

### Example

Here is a concrete example of how the premium tax credit is calculated.

```{r, echo=FALSE}
library(assertthat)
example_fpl <- federal_poverty_level(2018, "IA", 4)
example_income <- 2.25 * example_fpl
example_applicable_percentage <- (6.34 + 8.1)/2
example_reference_premium <- 1950.58
example_maximum_subsidy <- annual_subsidy(example_income, example_fpl, example_reference_premium, "IA")
example_gold_premium <- 2169.38
example_bronze_premium <- 1582.34
```

Assume a married couple both age 30 with two children and a household income of $`r format(example_income, big.mark=",")` living in Polk County, Iowa. The 2018 FPL for an Iowa household with 4 people is $`r format(example_fpl, big.mark=",")`. Their income is therefore 225% of the FPL, which means the applicable percentage will be half-way between 6.34% and 8.10%, or `r example_applicable_percentage`%. The reference premium is the second lowest Silver premium available. For this couple  in 2018, only one Silver plan is available, so the reference premium is the premium for that plan, which is $`r format(example_reference_premium, big.mark=",", nsmall=2)` per month, or $`r format(example_reference_premium * 12, big.mark=",", nsmall=2)` per year. The maximum available subsidy will be the amount by which the reference premium exceeds `r example_applicable_percentage`% of their income, or $`r format(example_reference_premium * 12, big.mark=",", nsmall=2)` - `r example_applicable_percentage / 100` x $`r format(example_income, big.mark=",")`, which equals $`r format(example_maximum_subsidy, big.mark=",", nsmall=2)`.

If this family purchases a Gold policy for $`r format(example_gold_premium * 12, big.mark=",")` per year, or a Silver policy for $`r format(example_reference_premium * 12, big.mark=",")` per year, their subsidy will be the full $`r format(example_maximum_subsidy, big.mark=",", nsmall=2)`. If, instead they purchase a Bronze policy for $`r format(example_bronze_premium * 12, big.mark=",")` per year, their subsidy will be limited to the cost of the Bronze policy because it is less than the maximum available subsidy.

### Available subsidy decreases as income rises

As household income gets closer to 400% of the FPL, the maximum available subsidy is reduced both by the fact that the applicable percentage applies to a higher income, and by the fact that the applicable percentage gradually rises to 9.56%. This effectively raises the marginal income tax rate for the household.

It is critical to note that subsidies are only available to people whose income does not exceed 400% of the FPL. **Subsidies are not available when household income exceeds 400% of FPL.** The complete loss of subsidies once household income reaches 400% of FPL creates a "cliff" and implies an effective marginal income tax rate far in excess of 100%. For a household right at 400% of FPL, a single dollar of additional income may result in a subsidy loss of thousands of dollars. Any subsidies that have already been received will be repaid in the form of an additional liability on the federal income tax return filed the following year.

The following chart shows the maximum available subsidy as a function of household income for the household in this example.

```{r, echo=FALSE, message=FALSE}
library(ggplot2)
library(choroplethr)
cliff_chart(19153, "Couple", 30, 2)
```

As shown in the chart, there is a subsidy "cliff" at 400% of FPL, or `r format(example_fpl * 4, big.mark=",")`. In this example, the size of the cliff is `r format(round(example_reference_premium * 12 - 0.0956 * 4 * example_fpl), big.mark=",")`. So, for example, if this family receives an advanced premium tax credit based on an estimated income of less than `r format(example_fpl * 4, big.mark=",")`, but their actual income for 2018 is even one dollar over this amount, they will be liable to repay the entire amount of their subsidy when they file their 2018 federal income tax return in 2019.

In a given year, the size of the cliff is mainly a function of the second highest Silver premium available, which varies by location, household size, and age. Health insurance premiums generally increase with the age of the insureds, so older people tend to face higher subsidy cliffs.

Here is the same chart for a couple age 60 in Polk County, Iowa.

```{r, echo=FALSE, message=FALSE}
cliff_chart(19153, "Couple", 60, 0)
```

Since health insurance premiums also vary by location, so does the size of the cliff. Let's calculate the size of the "cliff" for similar households in every county in the US. (Only states that use the federal health insurance exchange are included. States that operate their own exchanges are marked as NA.)

```{r echo=FALSE, message=FALSE, warning=FALSE}
cliff_map("Couple", 30, 2)
```

```{r echo=FALSE, message=FALSE, warning=FALSE}
cliff_map("Couple", 60, 0)
```

<br/>

Draft `r format(file.mtime("index.Rmd"), "%B %e, %Y")`

Data sources:

* Health insurance plans and premiums from [HealthCare.gov](https://www.healthcare.gov/health-and-dental-plan-datasets-for-researchers-and-issuers/).
* Federal Poverty Levels from [U.S. Department of Health and Human Services](https://aspe.hhs.gov/poverty-guidelines).
* Applicable Percentage tables from [Internal Revenue Service](https://www.irs.gov/). PDFs of the Revenue Procedures are included in the source code repository.

Source code: [https://github.com/davidbody/aca-subsidies](https://github.com/davidbody/aca-subsidies)

Author: [David W. Body](https://twitter.com/david_body)

---
